<div class="p-6 max-w-6xl mx-auto">
  <!-- Hero Section con Design Gaming Moderno -->
  <div class="mb-8 relative">
    <!-- Background Hero con Gradient Diagonale -->
    <div class="relative h-64 rounded-3xl overflow-hidden bg-gradient-to-r from-slate-900 via-purple-900 to-slate-900 border-2 border-purple-500 shadow-2xl">
      <!-- Gradient Line Diagonale (come nell'immagine di instant gaming) -->
      <div class="absolute inset-0 bg-gradient-to-r from-orange-500 via-purple-500 to-blue-500 opacity-20"></div>
      
      <!-- Content -->
      <div class="absolute inset-0 flex flex-col justify-center items-center px-12 z-10">
        <h1 class="text-8xl font-black bg-gradient-to-r from-orange-400 via-pink-300 to-blue-400 text-transparent bg-clip-text drop-shadow-lg mb-4 text-center">FREE GAMES</h1>
        <p class="text-xl text-gray-100 font-bold tracking-widest uppercase opacity-90 text-center">
          Cross-Platform • Always Free • Updated Daily
        </p>
        
        <!-- Neon Line Accent (come nell'immagine) -->
        <div class="mt-6 flex gap-2 items-center justify-center">
          <div class="w-2 h-2 rounded-full bg-orange-500 animate-pulse"></div>
          <div class="h-1 w-64 bg-gradient-to-r from-orange-500 via-purple-500 to-transparent"></div>
          <div class="w-2 h-2 rounded-full bg-purple-500 animate-pulse" style="animation-delay: 0.3s;"></div>
        </div>
      </div>
    </div>
    
    <!-- Subtitle con effetto gaming -->
    <div class="mt-6 text-center">
      <p class="text-lg text-gray-200 font-semibold tracking-wide">
        Discover Thousands of Amazing Free-to-Play Games
      </p>
    </div>
  </div>

  <div class="grid gap-4 md:grid-cols-2 mb-6">
    <!-- Left Column -->
    <div class="space-y-3">
      <label class="block">
        <div class="text-sm font-medium mb-1">Platform</div>
        <div class="platform-selector">
          <button
            *ngFor="let plat of platforms"
            class="platform-btn"
            [class.active]="platform === plat.value"
            (click)="platform = plat.value; onPlatformChange()"
          >
            <span class="platform-icon">{{ plat.icon }}</span>
            <span class="platform-label">{{ plat.label }}</span>
          </button>
        </div>
      </label>

      <label class="block">
        <div class="text-sm font-medium mb-1">Category</div>
        <select
          class="w-full rounded p-2 border"
          [(ngModel)]="category"
          (change)="onCategoryChange()"
        >
          <option *ngFor="let cat of categories" [value]="cat.value">
            {{ cat.label }}
          </option>
        </select>
      </label>

      <label class="block">
        <div class="text-sm font-medium mb-1">Search game by name</div>
        <input
          class="w-full rounded p-2 border"
          placeholder="search for a game..."
          [(ngModel)]="searchTitle"
          (change)="onSearchChange()"
        />
      </label>

      <label class="block">
        <div class="text-sm font-medium mb-1">Sort by</div>
        <select
          class="w-full rounded p-2 border"
          [(ngModel)]="sortBy"
          (change)="onSortByChange()"
        >
          <option value="">None</option>
          <option value="release-date">Release date</option>
          <option value="popularity">Popularity</option>
          <option value="alphabetical">Alphabetical</option>
          <option value="relevance">Relevance</option>
        </select>
      </label>
    </div>

    <!-- Right Column -->
    <div class="space-y-3">
      <div class="flex gap-2 items-center flex-wrap">
        <button
          class="px-4 py-2 rounded bg-blue-600 text-white hover:opacity-90 disabled:opacity-50"
          (click)="onLoadGamesClick()"
          [disabled]="loading"
        >
          {{ loading ? 'Loading...' : 'Load games' }}
        </button>

        <button
          class="px-4 py-2 rounded border"
          (click)="onResetClick()"
        >
          Reset
        </button>
      </div>
    </div>
  </div>

  <!-- Error Message -->
  <div
    *ngIf="error"
    class="mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded"
  >
    Error: {{ error }}
  </div>

  <!-- Games Grid -->
  <div>
    <p class="mb-3 text-sm text-gray-600">Results: {{ filteredGames.length }}</p>

    <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
      <a
        *ngFor="let game of filteredGames"
        [href]="getGameUrl(game)"
        target="_blank"
        rel="noreferrer"
        class="block p-3 bg-white rounded shadow hover:shadow-lg transition"
      >
        <div 
          class="w-full h-56 bg-gray-100 rounded overflow-hidden relative group"
          (mouseenter)="hoveredGameId = game.id"
          (mouseleave)="hoveredGameId = null"
        >
          <!-- Immagine di base -->
          <img
            *ngIf="game.thumbnail"
            [src]="game.thumbnail"
            [alt]="game.title"
            class="w-full h-full object-cover transition-opacity duration-300"
            [class.opacity-0]="hoveredGameId === game.id && getGameVideoUrl(game)"
          />
          <div
            *ngIf="!game.thumbnail"
            class="w-full h-full flex items-center justify-center text-gray-400"
          >
            No image
          </div>

          <!-- Video overlay al hover -->
          <div
            *ngIf="hoveredGameId === game.id && getGameVideoUrl(game)"
            class="absolute inset-0 bg-black rounded overflow-hidden animate-fade-in"
          >
            <video
              [src]="getGameVideoUrl(game)"
              autoplay
              loop
              muted
              class="w-full h-full object-cover"
            ></video>
          </div>

          <!-- Fallback message se non c'è video -->
          <div
            *ngIf="hoveredGameId === game.id && !getGameVideoUrl(game)"
            class="absolute inset-0 flex items-center justify-center bg-gray-800 text-white text-xs text-center p-2 rounded"
          >
            
          </div>
        </div>

        <h3 class="text-lg font-semibold mt-3">{{ game.title }}</h3>
        <div class="text-sm text-gray-700 mt-1">
          {{ game.short_description || game.description }}
        </div>

        <div class="text-sm text-gray-500 mt-1">
          <span class="mr-3">{{ game.platform }}</span>
          <span class="mr-3">{{ game.genre }}</span>
          <span>{{ game.release_date }}</span>
        </div>

        <div class="mt-3 flex items-center justify-between text-xs text-gray-500">
          <span>Publisher: {{ game.publisher || game.developer || '-' }}</span>
          <span *ngIf="game.freetogame_profile_url" class="italic">Profile</span>
        </div>
      </a>
    </div>

    <div
      *ngIf="filteredGames.length === 0 && !loading"
      class="mt-6 text-gray-500"
    >
      No games — try changing filters, enabling proxy, or toggling Mock mode.
    </div>
  </div>

  <!-- Notes -->
  <div class="mt-8 text-xs text-gray-500">
    Note: this app uses the public FreeToGame API (https://www.freetogame.com/api/). If
    you get CORS/network errors, refresh the page or try again later.
  </div>
</div>
